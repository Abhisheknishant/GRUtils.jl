<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating plots · GRUtils.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>GRUtils.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Introduction</a></li><li><a class="toctext" href="../../multiple/">Multiple plots</a></li><li><a class="toctext" href="../../color/">Color management</a></li><li><span class="toctext">API reference</span><ul><li><a class="toctext" href="../../api/plotting/">Plotting functions</a></li><li><a class="toctext" href="../../api/attributes/">Plot attributes</a></li><li><a class="toctext" href="../../api/control/">Control operations</a></li></ul></li><li><span class="toctext">Internals</span><ul><li><a class="toctext" href="../structure/">Structure of plots</a></li><li><a class="toctext" href="../drawing/">Drawing plots</a></li><li class="current"><a class="toctext" href>Creating plots</a><ul class="internal"><li><a class="toctext" href="#Viewport-constructors-1"><code>Viewport</code> constructors</a></li><li><a class="toctext" href="#Geometry-constructors-1"><code>Geometry</code> constructors</a></li><li><a class="toctext" href="#Axes-constructors-1"><code>Axes</code> constructors</a></li><li><a class="toctext" href="#Legend-constructors-1"><code>Legend</code> constructors</a></li><li><a class="toctext" href="#Colorbar-constructors-1"><code>Colorbar</code> constructors</a></li><li><a class="toctext" href="#Top-level-plot-constructors-1">Top-level plot constructors</a></li></ul></li><li><a class="toctext" href="../extending/">Extending GRUtils</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Internals</li><li><a href>Creating plots</a></li></ul><a class="edit-page" href="https://github.com/heliosdrm/GRUtils.jl/blob/master/docs/src/internals/createplots.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Creating plots</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Creating-plots-1" href="#Creating-plots-1">Creating plots</a></h1><p>At the lowest level, a single plot can be created through the following steps:</p><ol><li>Define a <code>Viewport</code> with the NDC of the boxes where the plot should be drawn.</li><li>Create one or more <code>Geometry</code> objects based on the data that should be plotted and the kind of geometries that will represent them, and collect them in a vector.</li><li>Create an <code>Axes</code> object with suitable dimensions and properties to contain the geometries.</li><li>Create a <code>Legend</code> to display the legends, if suitable.</li><li>Create a <code>Colorbar</code> to represent a guide to color codes, if suitable.</li><li>Put all the previous components together in a <code>PlotObject</code>.</li><li>Take a <code>Figure</code> where the plot should be displayed —; e.g. the current figure through <code>gcf()</code>, or create it, and put the newly created <code>PlotObject</code> into the <code>plots</code> vector of that figure.</li></ol><p>GRUtils also provides various constructors of those types and other functions that make those steps easier.</p><h2><a class="nav-anchor" id="Viewport-constructors-1" href="#Viewport-constructors-1"><code>Viewport</code> constructors</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Viewport-Tuple{Any,Bool}" href="#GRUtils.Viewport-Tuple{Any,Bool}"><code>GRUtils.Viewport</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Viewport(subplot, frame::Bool [, ratio::Real, margins])</code></pre><p>Return a <code>Viewport</code> object, defined by the normalized coordinates of the box that contains it (the argument <code>subplot</code>, which are normalized with respect to the size of the figure, not the whole device), and a flag (<code>frame::Bool</code>) telling whether there should be a frame. The size of that frame is calculated automatically.</p><p>This constructor also accepts to optional arguments: <code>ratio</code>, which is the width:height ratio of the inner box, and <code>margins</code>, a 4-vector with extra margins that there should be between the outer and inner boxes, in addition to the default size of the frame (in the order left-right-bottom-top).</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/plotobjects.jl#L16-L29">source</a></section><h2><a class="nav-anchor" id="Geometry-constructors-1" href="#Geometry-constructors-1"><code>Geometry</code> constructors</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Geometry-Tuple{Symbol}" href="#GRUtils.Geometry-Tuple{Symbol}"><code>GRUtils.Geometry</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Geometry(kind::Symbol [; kwargs...])</code></pre><p>Return a <code>Geometry</code> with selected parameters given by keyword arguments.</p><p>Most geometries do not need data for all the possible parameters that the <code>Geometry</code> type accepts. Thus, to simplify the creation of geometries, an alternative constructor takes the geometry’s <code>kind</code> as the only positional argument, and the rest of fields are given as keyword arguments (empty by default).</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/geometries.jl#L36-L46">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Geometry-Tuple{GRUtils.Geometry}" href="#GRUtils.Geometry-Tuple{GRUtils.Geometry}"><code>GRUtils.Geometry</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Geometry(g::Geometry; kwargs...)</code></pre><p>Return a copy of <code>g</code> replacing the data and attributes given as keyword arguments.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/geometries.jl#L57-L62">source</a></section><p>There is also a function <code>geometries</code> to create vectors of <code>Geometry</code> objects from the input data easily, or to fetch them from an already existing plot, taking advantage of multiple dispatch:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.geometries" href="#GRUtils.geometries"><code>GRUtils.geometries</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">geometries(kind, x [, y, z, c; kwargs...]) -&gt; Vector{Geometry}</code></pre><p>Create a vector of <a href="../structure/#GRUtils.Geometry"><code>Geometry</code></a> objects of a given <code>kind</code>, from arrays of data that define the coordinates of the geometries. All the other parameters of the geometries are given as keyword arguments</p><p>This function accepts coordinates defined only by one array of numbers, by two variables (<code>x</code> and <code>y</code>, typically for 2-D plots), three (<code>x</code>, <code>y</code>, <code>z</code>) or all four variables (<code>x</code>, <code>y</code>, <code>z</code> and <code>c</code>). If there is only one array <code>x</code> of real numbers given for the geometry coordinates, they will actually be used as Y coordinates, and X will be defined as a sequence of integers starting at 1. If that array contains complex numbers, the real part will be taken as X coordinates, and the imaginary part as Y coordinates.</p><p>The coordinates can be given as vectors or matrices with the same number of rows. In the latter case, each column of the matrices will be used to define a different <code>Geometry</code>. If some coordinates are given as vectors while other are in matrices, vectors will be recycled in all the geometries. E.g. if <code>x</code> is a vector with N numbers and <code>y</code> a matrix with N rows and M columns, the result will be a M-vector of geometries <code>g</code> such that <code>g[i]</code> will be a geometry whose X coordinates are the vector <code>x</code>, and whose Y coordinates are the <code>i</code>-th column of <code>y</code>.</p><p>In addition, the last coordinate can be given as a &quot;broadcastable&quot; function that takes the previous coordinates as inputs.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/geometries.jl#L68-L94">source</a><div><div><pre><code class="language-none">geometries(p::PlotObject)</code></pre><p>Return the vector of geometries contained in <code>p</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/plotobjects.jl#L158-L162">source</a></section><h2><a class="nav-anchor" id="Axes-constructors-1" href="#Axes-constructors-1"><code>Axes</code> constructors</a></h2><p>There are two alternative constructors for <code>Axes</code> objects: one like the alternative <code>Geometry</code> constructor, which is basically a shortcut to define only the non-empty parameters via keyword arguments; and another one that sets the axes up automatically based on the data to be plotted.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Axes-Tuple{Symbol}" href="#GRUtils.Axes-Tuple{Symbol}"><code>GRUtils.Axes</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Axes(kind::Symbol [; kwargs...])</code></pre><p>Return an <code>Axes</code> object with selected parameters given by keyword arguments.</p><p>This constructor only requires the <code>kind</code> of the axes (<code>:axes2d</code>, <code>:axes3d</code> or <code>:axespolar</code>), such that all the other parameters are passed as keyword arguments. Null or empty values are used by default for the parameters that are not given.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/axes.jl#L53-L61">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Axes-Tuple{Any,Array{#s19,N} where N where #s19&lt;:GRUtils.Geometry}" href="#GRUtils.Axes-Tuple{Any,Array{#s19,N} where N where #s19&lt;:GRUtils.Geometry}"><code>GRUtils.Axes</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Axes(kind, geoms::Array{&lt;:Geometry} [; kwargs...]) where kind</code></pre><p>Return an <code>Axes</code> object defined by the <code>kind</code> of the axes, and a vector of <a href="../structure/#GRUtils.Geometry"><code>Geometry</code></a> objects that are meant to be plotted inside the axes, which are used to calculate the different axis limits, ticks, etc. Keyword arguments are used to override the default calculations.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/axes.jl#L70-L77">source</a></section><h2><a class="nav-anchor" id="Legend-constructors-1" href="#Legend-constructors-1"><code>Legend</code> constructors</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Legend-Tuple{Array{#s19,N} where N where #s19&lt;:GRUtils.Geometry}" href="#GRUtils.Legend-Tuple{Array{#s19,N} where N where #s19&lt;:GRUtils.Geometry}"><code>GRUtils.Legend</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Legend(geoms [, maxrows])</code></pre><p>Return a <code>Legend</code> object defined by the collection of geometries that are meant to be referred to in the legend.</p><p>Optionally, this constructor can take the maximum number of items that are represented in each column of the legend. Only the items in that collection of geometries where <code>label</code> is not empty will be included.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/legends.jl#L26-L35">source</a></section><h2><a class="nav-anchor" id="Colorbar-constructors-1" href="#Colorbar-constructors-1"><code>Colorbar</code> constructors</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Colorbar-Tuple{GRUtils.Axes}" href="#GRUtils.Colorbar-Tuple{GRUtils.Axes}"><code>GRUtils.Colorbar</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Colorbar(axes::Axes [, colors=256])</code></pre><p>Return a <code>Colorbar</code> defined by an <code>Axes</code> object that is used to calculate its different properties, depending on the kind of axis and the range of the <code>c</code> axis. If the <code>c</code> axis is not defined, this will return an empty <code>Colorbar</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/colorbars.jl#L30-L36">source</a></section><h2><a class="nav-anchor" id="Top-level-plot-constructors-1" href="#Top-level-plot-constructors-1">Top-level plot constructors</a></h2><p>The constructors presented above for the different components of a plot allow to build plots from data using different &quot;grammars&quot;. Besides, GRUtils also provide top-level <a href="../../api/plotting/#Plotting-functions-1">Plotting functions</a> that imitate the interface provided by <code>jlgr</code>.</p><p>Since most of those functions follow the same basic steps described above, a macro <code>@plotfunction</code> is provided to create them from a template.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.@plotfunction" href="#GRUtils.@plotfunction"><code>GRUtils.@plotfunction</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@plotfunction(fname, options...)</code></pre><p>Macro to create plotting functions. E.g. <code>@plotfunction plot</code> creates two functions:</p><pre><code class="language-none">* `plot!(f::Figure, args...; kwargs...)`
* `plot(args...; kwargs...)`</code></pre><p>The first of those functions (the one whose name ends with an exclamation) edits the figure given as first argument, replacing its last plot by a new one. The second function (the one without exclamation) creates the plot in the current figure. How those functions work depends on the options that are passed after the function name to the macro. Those options are expressed in the fashion of keyword argments, i.e. as <code>key = value</code>, and they can be the following:</p><ul><li><strong><code>geom</code></strong>: a <code>Symbol</code> with the name of the kind of the <code>Geometry</code> that is created.</li><li><strong><code>axes</code></strong>: a <code>Symbol</code> with the name of the kind of the <code>Axes</code> that are created.</li><li><strong><code>plotkind</code></strong>: a <code>Symbol</code> with the name of the plot kind (only needed as meta-data).   If this option is not given, the name of the function is used by default.</li><li><strong><code>setargs</code></strong>: a function that takes the positional and keyword arguments that are   passed to the functions, and returns: (a) a tuple of positional arguments   to be passed to the function <a href="#GRUtils.geometries"><code>geometries</code></a>), and   (b) the set of keyword arguments that are passed to the constructor of   geometries, axes, and the plot object. If <code>setargs</code> is not defined, the   positional and keyword arguments are returned untransformed.</li><li><strong><code>kwargs</code></strong>: a named tuple with extra keyword arguments that are passed to   the constructors of geometries, axes and the plot object.</li><li><strong><code>docstring</code></strong>: the documentation string that will be assigned to the plotting function.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/073cff7959f8e7d428a83706140da01427a95e27/src/frontend.jl#L12-L41">source</a></section><footer><hr/><a class="previous" href="../drawing/"><span class="direction">Previous</span><span class="title">Drawing plots</span></a><a class="next" href="../extending/"><span class="direction">Next</span><span class="title">Extending GRUtils</span></a></footer></article></body></html>
