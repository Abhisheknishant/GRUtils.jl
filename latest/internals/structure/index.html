<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Structure of plots · GRUtils.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>GRUtils.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Introduction</a></li><li><a class="toctext" href="../../multiple/">Multiple plots</a></li><li><a class="toctext" href="../../color/">Color management</a></li><li><span class="toctext">API reference</span><ul><li><a class="toctext" href="../../api/plotting/">Plotting functions</a></li><li><a class="toctext" href="../../api/attributes/">Plot attributes</a></li><li><a class="toctext" href="../../api/control/">Control operations</a></li></ul></li><li><span class="toctext">Internals</span><ul><li class="current"><a class="toctext" href>Structure of plots</a><ul class="internal"></ul></li><li><a class="toctext" href="../drawing/">Drawing plots</a></li><li><a class="toctext" href="../createplots/">Creating plots</a></li><li><a class="toctext" href="../extending/">Extending GRUtils</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Internals</li><li><a href>Structure of plots</a></li></ul><a class="edit-page" href="https://github.com/heliosdrm/GRUtils.jl/blob/master/docs/src/internals/structure.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Structure of plots</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Structure-of-plots-1" href="#Structure-of-plots-1">Structure of plots</a></h1><p>GRUtils replaces some long, convoluted functions of <code>jlgr</code> with many <code>if-else</code> blocks by more numerous, but smaller functions based on type-dispatch, and takes advantage of meta-programming, such that those functions can be revised and debugged easily, and new utilities can be added with new functions and methods, without having to modify the existing ones.</p><p>Plots are composed of a set of objects of different types, which are defined below, along with some notes comparing this structure with the plots produced in <code>jlgr</code>.</p><h3><a class="nav-anchor" id="Figures-1" href="#Figures-1">Figures</a></h3><p>Figures are the &quot;top-level&quot; objects, that contain all the information of a plot or set of &quot;subplots&quot; that are meant to be drawn together. This is represented by the type <code>Figure</code>, which is basically a collection of plots, gathered in a graphic workstation of a given size. Its structure is simple, defined in a very basic constructor:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Figure" href="#GRUtils.Figure"><code>GRUtils.Figure</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Figure(workstation::Tuple{Float64, Float64}, plots::Vector{PlotObject})</code></pre><p>Return a new figure, defined by:</p><ul><li><strong><code>workstation</code></strong>: a <code>Tuple{Float64, Float64}</code> with the width and height of the   overall plot container (workstation), in pixels.</li><li><strong><code>plots</code></strong>: a vector of <a href="#GRUtils.PlotObject"><code>PlotObject</code></a> elements, which contain the information of   the individual plots included in the figure.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/figures.jl#L1-L10">source</a></section><h3><a class="nav-anchor" id="Plot-objects-1" href="#Plot-objects-1">Plot objects</a></h3><p>The type <code>PlotObject</code> provides the data structure for what can be considered a &quot;complete&quot; single plot. This type is roughly equivalent to the type of the same name defined in <code>jlgr</code>, although its structure is quite different:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.PlotObject" href="#GRUtils.PlotObject"><code>GRUtils.PlotObject</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">PlotObject(viewport, axes, geoms, legend, colorbar, attributes)
PlotObject(viewport, axes, geoms, legend, colorbar; kwargs...)</code></pre><p>Return a <code>PlotObject</code> containing the following parameters:</p><ul><li><strong><code>viewport</code></strong>: a <a href="#GRUtils.Viewport"><code>Viewport</code></a> object, which defines the area covered by the   plot and the coordinate axes in the display.</li><li><strong><code>axes</code></strong>: an <a href="#GRUtils.Axes"><code>Axes</code></a> object that defines how to represent the   coordinate axes of the space where the plot is contained.</li><li><strong><code>geoms</code></strong>: a <code>Vector</code> of <a href="#GRUtils.Geometry"><code>Geometry</code></a> objects that are plotted in the axes.</li><li><strong><code>legend</code></strong>: a <a href="#GRUtils.Legend"><code>Legend</code></a> object that defines how to present a legend of the   different geometries (if required).</li><li><strong><code>colorbar</code></strong>: a <a href="#GRUtils.Colorbar"><code>Colorbar</code></a> object that defines how to present the guide   to the color scale (if required).</li><li><strong><code>attributes</code></strong>: a dictionary (<code>Dict{Symbol, Any}</code>) with varied plot attributes,   including the title, axis labels, and other data that modify the default way   of representing the different components of the plot. Those attributes   can be passed to the <code>PlotObject</code> constructor as keyword arguments.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/plotobjects.jl#L64-L83">source</a></section><p>All the parameters of a <code>PlotObject</code> are instances of other types for the different elements of a plot, which are defined below. <code>PlotObject</code> is a mutable type, which means that those parameters can be replaced by others of the same type without having to replace the whole object.</p><p>The last plot of a figure <code>f</code> is considered itself its &quot;current plot&quot;, and can be referred to by the function <code>currentplot(f)</code>. If no argument is given to <code>currentplot()</code>, the last plot of the current figure is returned — equivalent to <code>currentplot(gcf())</code>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, the function <code>gcf()</code> directly returns the global current plot, which can also be identified by <code>jlgr.plt</code>.</p></div></div><h3><a class="nav-anchor" id="Viewport-1" href="#Viewport-1">Viewport</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Viewport" href="#GRUtils.Viewport"><code>GRUtils.Viewport</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Viewport(outer::Vector{Float64}, inner::Vector{Float64})</code></pre><p>Return a <code>Viewport</code> object, defining the &quot;normalized device coordinates&quot; (NDC) of the <code>outer</code> box that contains all the elements of the plot, and the <code>inner</code> box where the main items (axes and geometries) are plotted.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/plotobjects.jl#L1-L7">source</a></section><p>The <code>Viewport</code> of a plot defines the &quot;normalized device coordinates&quot; (NDC) of the outer box that contains all the elements of a plot, and of the inner box where the main items (axes and geometries) are plotted.</p><p>Such boxes are defined by 4 coordinates; the first and second coordinates are the distances between the left margin of the device and the left and right borders of the box, respectively; the third and fourth coordinates are the distances between the bottom of the device and the bottom and top borders, respectively.</p><p><img src="../../assets/img/boxcoordinates.png" alt="Box coordinates"/></p><p>NDC are given in dimensionless units between 0 and 1, such that <code>(0, 1, 0, 1)</code> means a box that spans over the whole device.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, the outer and inner boxes of a plot are described in the field <code>kvs</code> of the corresponding <code>PlotObject</code> item. For instance, for the global &quot;current plot&quot; <code>plt</code>, the coordinates of the outer box are <code>plt.kvs[:viewport]</code>, and for the inner box they are <code>plt.kvs[:vp]</code>.)</p></div></div><h3><a class="nav-anchor" id="Geometries-1" href="#Geometries-1">Geometries</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Geometry" href="#GRUtils.Geometry"><code>GRUtils.Geometry</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Geometry(kind, x, y, z, c, spec, label, attributes)</code></pre><p>Return a <code>Geometry</code> containing the data represented in a plot by means of geometric elements (lines, markers, shapes, etc.).</p><p>Each <code>Geometry</code> has a <code>kind</code>, given by a <code>Symbol</code> with the name of the geometric element that it represents, such as <code>:line</code> for lines, <code>:scatter</code> for scattered points, <code>:bar</code> for bars, etc. In addition it has the following fields:</p><ul><li><strong><code>x</code></strong>, <strong><code>y</code></strong>, <strong><code>z</code></strong>, <strong><code>c</code></strong>: Vectors of <code>Float64</code> numbers that are mapped to different   characteristics of the geometry. <code>x</code> and <code>y</code> are normally their X and Y   coordinates; <code>z</code> usually is its Z coordinate in 3-D plots, or another   aesthetic feature (e.g. the size in scatter plots); <code>c</code> is usually meant   to represent the color scale, if it exists.</li><li><strong><code>spec</code></strong>: a <code>String</code> with the specification of the line style, the type of marker   and the color of lines in line plots.   (Cf. the defintion of format strings in <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.plot.html">matplotlib</a>)</li><li><strong><code>label</code></strong>: a <code>String</code> with the label used to identify the geometry in the plot legend.</li><li><strong><code>attributes</code></strong>: a <code>Dict{Symbol, Float64}</code> with extra attributes to control how   geometries are plotted.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/geometries.jl#L1-L22">source</a></section><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, all those data except the ones contained in the field <code>attributes</code> are given in the elements of the <code>args</code> vector of the corresponding <code>PlotObject</code> item.</p></div></div><h3><a class="nav-anchor" id="Axes-1" href="#Axes-1">Axes</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Axes" href="#GRUtils.Axes"><code>GRUtils.Axes</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Axes(kind, ranges, tickdata, ticklabels, perspective, camera, options)</code></pre><p>Return an <code>Axes</code> object, containing the graphical specifications of the coordinate system of a plot.</p><p>Axes are determined by their <code>kind</code>, which may be <code>:axes2d</code> for 2-D plots, <code>:axes3d</code> for 3-D plots, and <code>:polar</code> for polar plots. The rest of its fields are:</p><ul><li><strong><code>ranges</code></strong>: boundaries of the different axes/scales. They are given as a dictionary   whose keys are symbols with the name of the axis (<code>:x</code>, <code>:y</code>, <code>:z</code>, <code>:c</code>),   and whose values are tuples with two float values — the minimum and maximum   values, respectively. The range <code>(Inf, -Inf)</code> describes an undefined axis.</li><li><strong><code>tickdata</code></strong>: numeric specifications of the &quot;ticks&quot; that are drawn on the axes.   They are given as a dictionary whose keys are the names of the axis (as for <code>range</code>),   and whose values are tuples that contain for that axis: (1) a <code>Float64</code> with   the &quot;minor&quot; value between consecutive ticks; (2) a 2-tuple of <code>Float64</code> with   the ends of the axis ticks; and (3) an <code>Int</code> with the number of minor ticks   between &quot;major&quot;, numbered ticks.</li><li><strong><code>ticklabels</code></strong>: transformations between tick values and labels. They are given   as a dictionary whose keys are the names of the axis, and whose values are   functions that accept a number as argument, and return a string with the   text that must be written at major ticks. (This only works for the X and Y axes).</li><li><strong><code>perspective</code></strong>: A <code>Vector{Int}</code> that contains the &quot;rotation&quot; and &quot;tilt&quot; angles   that are used to project 3-D axes on the plot plane. (Only for 3-D plots)</li><li><strong><code>camera</code></strong>: A <code>Vector{Float64}</code> with the camera parameters (camera position,   view center and &quot;up&quot; vector, only used for 3-D plots).</li><li><strong><code>options</code></strong>: A <code>Dict{Symbol, Int}</code> with extra options that control the visualization   of the axes. Currently supported options are:<ul><li><code>options[:scale]</code>, an integer code that defines what axes are must be   plotted in log scale or reversed (cf. the function <code>GR.setscale</code>).</li><li><code>options[:grid] = 0</code> to hide the plot grid, or any other value to show it.</li><li><code>options[:tickdir]</code> to determine how the ticks are drawn   (positive value to draw them inside the plot area, negative value to   draw them outside, or <code>0</code> to hide them).</li><li><code>options[:gr3] ≠ 0</code> to identify if the axes are a 3-D scene defined for the <code>gr3</code> interface.</li><li><code>options[:radians] = 0</code> to transform angular values to degrees in polar axes.</li></ul></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/axes.jl#L5-L42">source</a></section><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, most of those data are described in the dictionary <code>kvs</code> contained in the corresponding <code>PlotObject</code> item, or calculated during plotting operations without being stored.</p></div></div><h3><a class="nav-anchor" id="Legends-1" href="#Legends-1">Legends</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Legend" href="#GRUtils.Legend"><code>GRUtils.Legend</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Legend(size::Tuple{Float64, Float64}, cursors::Vector{Tuple{Float64, Float64}})</code></pre><p>Return a <code>Legend</code> object.</p><p>This type defines the frame where a legend is plotted. The fields contained in a <code>Legend</code> object are a 2-tuple with the size of the legend box in NDC (width and height, respectively), and a vector of 2-tuples with the positions of the legend items.</p></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/legends.jl#L11-L20">source</a></section><p>The symbols and labels that should be shown in the legend are not described in the <code>Legend</code> object, but they are fetched from the <code>Geometry</code> objects used in the plot where the legend is defined.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, those values are not stored in any parameter of plot objects. Only the relative position of the legend with respect to the axes area is stored, and everything is calculated in the moment of drawing the plot.)</p></div></div><h3><a class="nav-anchor" id="Color-bars-1" href="#Color-bars-1">Color bars</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="GRUtils.Colorbar" href="#GRUtils.Colorbar"><code>GRUtils.Colorbar</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Colorbar(range, tick, scale, margin, colors)</code></pre><p>Return a <code>Colorbar</code> object containing the data that defines the colorbar associated to a plot.</p><p>The fields contained in a <code>Legend</code> object are:</p><ul><li><strong><code>range</code></strong>: a Tuple{Float64, Float64} with the range of the color scale   represented in the bar.</li><li><strong><code>tick</code></strong>: a <code>Float64</code> that gives the distance between tick marks drawn as   guide next to the bar.</li><li><strong><code>scale</code></strong>: an <code>Int</code> code used by <code>GR.setscale</code> to define the   scale of the bar (basically, if it is presented as linear or log scale).</li><li><strong><code>margin</code></strong>: a <code>Float64</code> with the size of the extra margin between the main   plot frame and the bar.</li><li><strong>`colors</strong><code>: an</code>Int` indicating the number of different grades in the color scale.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/heliosdrm/GRUtils.jl/blob/cbc3405e344b9a531c5d5e493c49dd5d126dfb48/src/colorbars.jl#L1-L18">source</a></section><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In <code>jlgr</code>, those values are not stored in any parameter of plot objects, and everything is calculated in the moment of drawing the plot, if suitable.</p></div></div><footer><hr/><a class="previous" href="../../api/control/"><span class="direction">Previous</span><span class="title">Control operations</span></a><a class="next" href="../drawing/"><span class="direction">Next</span><span class="title">Drawing plots</span></a></footer></article></body></html>
